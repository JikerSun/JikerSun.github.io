<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  <title>JakieSun_厕所蹲个驴</title>

  <!-- keywords -->
  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="驴哥的blog | IOS | Android(略懂) | RN(开始钻研) | 其他(略懂)">
<meta property="og:type" content="website">
<meta property="og:title" content="JakieSun_厕所蹲个驴">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="JakieSun_厕所蹲个驴">
<meta property="og:description" content="驴哥的blog | IOS | Android(略懂) | RN(开始钻研) | 其他(略懂)">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JakieSun_厕所蹲个驴">
<meta name="twitter:description" content="驴哥的blog | IOS | Android(略懂) | RN(开始钻研) | 其他(略懂)">
  
    <link rel="alternative" href="/atom.xml" title="JakieSun_厕所蹲个驴" type="application/atom+xml">
  
  
    <link rel="icon" href="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1509965970128&di=50ef90b75009ba6bfa72bc1551bbe214&imgtype=0&src=http%3A%2F%2Fimg.25pp.com%2Fuploadfile%2Fsoft%2Fimages%2F2015%2F0725%2F20150725103726182.jpg">
  
  <link rel="stylesheet" href="/css/style.css">
  
  

  <script src="//cdn.bootcss.com/require.js/2.3.2/require.min.js"></script>
  <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>

  
</head></html>
<body>
  <div id="container">
    <div id="particles-js"></div>
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1606289047897&amp;di=8209eb27af71ac53b08f98b283de8eb2&amp;imgtype=0&amp;src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2F96983db98a01a3ba5dbccbff32d1131e62e3e4551bbde-vtmFkh_fw658" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">JakieSun</a></h1>
		</hgroup>

		
		<p class="header-subtitle">韶华不为少年留,恨悠悠,几时休</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Android开发/" style="font-size: 12.5px;">Android开发</a> <a href="/tags/hexo探索/" style="font-size: 10px;">hexo探索</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/ios开发/" style="font-size: 20px;">ios开发</a> <a href="/tags/python开发/" style="font-size: 10px;">python开发</a> <a href="/tags/主播相关/" style="font-size: 10px;">主播相关</a> <a href="/tags/命令行端探索/" style="font-size: 10px;">命令行端探索</a> <a href="/tags/技术探索/" style="font-size: 17.5px;">技术探索</a> <a href="/tags/自动化打包/" style="font-size: 15px;">自动化打包</a> <a href="/tags/音乐篇/" style="font-size: 10px;">音乐篇</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/smackgg/hexo-theme-smackdown">smackdown</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://github.com/JikerSun">github</a>
			        
			          <a target="_blank" class="main-nav-link switch-friends-link" href="https://www.jianshu.com/u/1aae85c9610a">简书</a>
			        
			        </div>
				</section>
				

				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">JakieSun</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1606289047897&amp;di=8209eb27af71ac53b08f98b283de8eb2&amp;imgtype=0&amp;src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2F96983db98a01a3ba5dbccbff32d1131e62e3e4551bbde-vtmFkh_fw658" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">JakieSun</h1>
			</hgroup>
			
			<p class="header-subtitle">韶华不为少年留,恨悠悠,几时休</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-自动打包-jenkins-xcodebuild" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/08/02/自动打包-jenkins-xcodebuild/" class="article-date">
  	<time datetime="2023-08-02T03:15:52.000Z" itemprop="datePublished">2023-08-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/08/02/自动打包-jenkins-xcodebuild/">
        自动打包- jenkins + xcodebuild
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="jenkins-xcodebuild"><a href="#jenkins-xcodebuild" class="headerlink" title="jenkins + xcodebuild"></a>jenkins + xcodebuild</h1><p><a href="https://www.jianshu.com/p/bc57da017291" target="_blank" rel="noopener">参考链接1(主要看1)</a></p>
<p><a href="https://blog.csdn.net/songecit/article/details/53381184" target="_blank" rel="noopener">参考文档2</a></p>
<p><a href="https://www.jianshu.com/p/4d182d7fbf01" target="_blank" rel="noopener">遇到的坑</a></p>
<h3 id="直接贴上jenkins的-Execute-shell的脚本"><a href="#直接贴上jenkins的-Execute-shell的脚本" class="headerlink" title="直接贴上jenkins的 Execute shell的脚本"></a>直接贴上jenkins的 Execute shell的脚本</h3><p>根据之前的jenkins打包设置jenkins唯一不一样的地方就是之前是用fastlane管理ios各个项目包, 但是对于只有一个工程的包, 用fastlane实在是没必要, 不如直接用xcodebuild方便一点还不用打环境, 打那个环境不知道咋地老失败, 我也是很苦恼,</p>
<p>什么也不说了 直接贴上代码, (这个直接复制到jenkins 的<strong>Execute shell</strong>里面)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">#git相关操作重置 / 清理</span><br><span class="line">git reset --hard</span><br><span class="line">git clean -f</span><br><span class="line"># 删除pod相关文件夹</span><br><span class="line">#rm -rf pods &amp; rm -rf Podfile.lock</span><br><span class="line">#pod 项目</span><br><span class="line">#pod install --verbose --no-repo-update</span><br><span class="line"># bundle用于运行fastlane中的Gemfile文件内容</span><br><span class="line">#fastlane 用于跑fastlane/Fastfile中的代码(同上已写) </span><br><span class="line">#development_build 方法是Fastfile中放出来的shell 方法名</span><br><span class="line">#bundle install &amp;&amp; bundle exec fastlane matemet_aliyun</span><br><span class="line"></span><br><span class="line"># 删除build文件夹 每次重新打包都删除</span><br><span class="line">rm -rf build</span><br><span class="line"> # 打包的环境，正式环境为空，可选 &#123;&apos;Develop&apos;;  &apos;Release&apos;;  &apos;&apos;&#125;</span><br><span class="line">APP_ENV=&quot;Develop&quot;</span><br><span class="line">#工程名字(Target名字)</span><br><span class="line">Project_Name=&quot;Vamar&quot;</span><br><span class="line"># build 路径</span><br><span class="line">project_workspace=&quot;$&#123;Project_Name&#125;.xcworkspace&quot;</span><br><span class="line">#project_scheme=&quot;$&#123;Project_Name&#125;$&#123;APP_ENV&#125;&quot;</span><br><span class="line">project_scheme=&quot;$&#123;Project_Name&#125;&quot;</span><br><span class="line"></span><br><span class="line"># 获取app版本号</span><br><span class="line">#APP_VERSION=`/usr/libexec/PlistBuddy -c &quot;Print :CFBundleShortVersionString&quot; &quot;$&#123;WORKSPACE&#125;/Vamar/Resources/$&#123;project_scheme&#125;-Info.plist&quot;`</span><br><span class="line">APP_VERSION=1.0.3</span><br><span class="line"></span><br><span class="line">export_path=&quot;$&#123;WORKSPACE&#125;/build/ipa_out/$&#123;Project_Name&#125;&quot;</span><br><span class="line">export_name=&quot;$&#123;export_path&#125;/$&#123;project_scheme&#125;_$&#123;APP_VERSION&#125;.ipa&quot;</span><br><span class="line"></span><br><span class="line"># archive 目标路径</span><br><span class="line">build_dir=&quot;$&#123;WORKSPACE&#125;/build&quot;</span><br><span class="line">archive_path=&quot;$&#123;build_dir&#125;/$&#123;project_scheme&#125;.xcarchive&quot;</span><br><span class="line"></span><br><span class="line">#plist文件</span><br><span class="line">exportOptionsPlist=&quot;$&#123;build_dir&#125;/$&#123;project_scheme&#125;.plist&quot;</span><br><span class="line"></span><br><span class="line"># 构建变量写入文件</span><br><span class="line">echo &quot;APP_VERSION=$&#123;APP_VERSION&#125;</span><br><span class="line">project_workspace=$&#123;project_workspace&#125;</span><br><span class="line">project_scheme=$&#123;project_scheme&#125;</span><br><span class="line">export_path=$&#123;export_path&#125;</span><br><span class="line">export_name=$&#123;export_name&#125;</span><br><span class="line">build_dir=$&#123;build_dir&#125;</span><br><span class="line">archive_path=$&#123;archive_path&#125;</span><br><span class="line">exportOptionsPlist=$&#123;exportOptionsPlist&#125;&quot; &gt; BuildVariable</span><br><span class="line"></span><br><span class="line">#配置环境，Release或者Debug</span><br><span class="line">Configuration=Debug</span><br><span class="line"></span><br><span class="line">#AdHoc版本的Bundle ID</span><br><span class="line">BundleID=com.chamet.test</span><br><span class="line"></span><br><span class="line">#证书名#描述文件</span><br><span class="line">#CODE_SIGN_IDENTITY=Apple Development: **************</span><br><span class="line">#CPROVISIONING_PROFILE_NAME=chametbeta_dev</span><br><span class="line">#PROFILE_UUID=b4038ef7-5a35-489a-b875-bd3f10b05a91</span><br><span class="line"></span><br><span class="line">#!/bin/bash</span><br><span class="line">#author Jony</span><br><span class="line">func_export_plist()&#123;</span><br><span class="line">echo &apos;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span><br><span class="line">&lt;plist version=&quot;1.0&quot;&gt;</span><br><span class="line">&lt;dict&gt;</span><br><span class="line">        &lt;key&gt;signingStyle&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;manual&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;method&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;development&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;signingCertificate&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;iOS Developer&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;provisioningProfiles&lt;/key&gt;</span><br><span class="line">        &lt;dict&gt;</span><br><span class="line">                &lt;key&gt;com.chamet.test&lt;/key&gt;</span><br><span class="line">                &lt;string&gt;chametbeta_dev&lt;/string&gt;</span><br><span class="line">        &lt;/dict&gt;</span><br><span class="line">        &lt;key&gt;iCloudContainerEnvironment&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;Development&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;stripSwiftSymbols&lt;/key&gt;</span><br><span class="line">        &lt;true/&gt;</span><br><span class="line">        &lt;key&gt;compileBitcode&lt;/key&gt;</span><br><span class="line">        &lt;true/&gt;</span><br><span class="line">        &lt;key&gt;manifest&lt;/key&gt;</span><br><span class="line">        &lt;dict&gt;</span><br><span class="line">                &lt;key&gt;appURL&lt;/key&gt;</span><br><span class="line">                &lt;string&gt;https://td.01bite.net/ios/package/5.ipa&lt;/string&gt;</span><br><span class="line">                &lt;key&gt;displayImageURL&lt;/key&gt;</span><br><span class="line">                &lt;string&gt;https://www.baidu.com&lt;/string&gt;</span><br><span class="line">                &lt;key&gt;fullSizeImageURL&lt;/key&gt;</span><br><span class="line">                &lt;string&gt;https://www.baidu.com&lt;/string&gt;</span><br><span class="line">        &lt;/dict&gt;</span><br><span class="line">&lt;/dict&gt;</span><br><span class="line">&lt;/plist&gt;&apos; &gt; $&#123;exportOptionsPlist&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">func_build()&#123;</span><br><span class="line">    # 证书解锁</span><br><span class="line">    security unlock-keychain -p 123456 ~/Library/Keychains/login.keychain-db</span><br><span class="line">    # 清理</span><br><span class="line">    xcodebuild clean -workspace $project_workspace -scheme $project_scheme -configuration $Configuration</span><br><span class="line">    # 构建 archive 包</span><br><span class="line">    xcodebuild archive -workspace $project_workspace \</span><br><span class="line">    -scheme $project_scheme \</span><br><span class="line">    -configuration $Configuration \</span><br><span class="line">    PLATFORM_NAME=iphoneos \</span><br><span class="line">    -archivePath $archive_path \</span><br><span class="line">    BUILD_DIR=&quot;$build_dir&quot;  \</span><br><span class="line">    #PROVISIONING_PROFILE_SPECIFIER=&quot;$CPROVISIONING_PROFILE_NAME&quot; \</span><br><span class="line">    #PROVISIONING_PROFILE=&quot;$&#123;PROFILE_UUID&#125;&quot; \</span><br><span class="line">    PRODUCT_BUNDLE_IDENTIFIER=&quot;$&#123;BundleID&#125;&quot;</span><br><span class="line">    # 输出版本号</span><br><span class="line">    #/usr/libexec/PlistBuddy -c &quot;Print :ApplicationProperties:CFBundleVersion&quot; $&#123;archivePath&#125;/Info.plist</span><br><span class="line">    #/usr/libexec/PlistBuddy -c &quot;Print :ApplicationProperties:CFBundleShortVersionString&quot; $&#123;archivePath&#125;/Info.plist</span><br><span class="line">    #输出ipa包</span><br><span class="line">    xcodebuild -exportArchive -archivePath $archive_path -exportOptionsPlist $exportOptionsPlist -exportPath $export_path</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cd $&#123;WORKSPACE&#125;</span><br><span class="line">mkdir -p build</span><br><span class="line"># 编译</span><br><span class="line">func_export_plist</span><br><span class="line">func_build</span><br></pre></td></tr></table></figure>
<h3 id="关于exportOptionsPlist-plist文件"><a href="#关于exportOptionsPlist-plist文件" class="headerlink" title="关于exportOptionsPlist.plist文件"></a>关于exportOptionsPlist.plist文件</h3><p>目前来说可以不往项目里面拷贝, 因为已经卸载脚本里了, 要是需要拷贝的话就参考链接1 有说明</p>
<h3 id="jenkins-有个根据git推送自动打包的选项-构建触发器"><a href="#jenkins-有个根据git推送自动打包的选项-构建触发器" class="headerlink" title="jenkins 有个根据git推送自动打包的选项 (构建触发器)"></a>jenkins 有个根据git推送自动打包的选项 (构建触发器)</h3><ol>
<li><p>Build when a change is pushed to GitLab. GitLab webhook URL: <a href="http://192.168.1.210:8080/project/Matemet_Ios" target="_blank" rel="noopener">http://192.168.1.210:8080/project/Matemet_Ios</a><br>(这个插件你配置上之后只要是git所有分支有改动都会打包, 缺点是没法改)</p>
</li>
<li><p>Generic Webhook Trigger<br>(这个插件是可以根据 脚本规则跟git配合 指定人或者分支或者其他的详细操作, 就是有点难搞)<br><a href="https://blog.csdn.net/weixin_44455125/article/details/124504083" target="_blank" rel="noopener">参考文档1</a><br><a href="https://blog.csdn.net/BUG_88/article/details/119752824" target="_blank" rel="noopener">参考文档2</a><br><a href="https://blog.csdn.net/qq398577351/article/details/113695506" target="_blank" rel="noopener">参考文档3</a><br><a href="https://blog.51cto.com/mfc001/6214265" target="_blank" rel="noopener">参考4</a></p>
</li>
</ol>
<h3 id="xcodebuild或者jenkins打包到蒲公英或者是自己搭建ios分发平台"><a href="#xcodebuild或者jenkins打包到蒲公英或者是自己搭建ios分发平台" class="headerlink" title="xcodebuild或者jenkins打包到蒲公英或者是自己搭建ios分发平台"></a>xcodebuild或者jenkins打包到蒲公英或者是自己搭建ios分发平台</h3><p><a href="https://www.jianshu.com/p/c42308a07b10" target="_blank" rel="noopener">jenkins搭建ipa内网分发</a><br><a href="https://developer.aliyun.com/article/1143937" target="_blank" rel="noopener">xcodebuild自动打包并且上传到蒲公英脚本</a></p>
<h2 id="如果想要上传到自己的服务器的manifest-plist文件是个关键"><a href="#如果想要上传到自己的服务器的manifest-plist文件是个关键" class="headerlink" title="如果想要上传到自己的服务器的manifest.plist文件是个关键"></a>如果想要上传到自己的服务器的manifest.plist文件是个关键</h2><p>(需要三个keyappURL, displayImageURL, fullSizeImageURL)<br>详细请看<a href="https://www.cnblogs.com/liuluoxing/p/8622108.html" target="_blank" rel="noopener">这个链接1</a><br><a href="https://zhuanlan.zhihu.com/p/440986066" target="_blank" rel="noopener">链接2</a><br>搜索”manifest”, 再xcodebuild命令的ExportOptions.plist文件创建的时候添加manifest有明确的介绍</p>
<h3 id="1-生成ipa包之后-先上传到服务器"><a href="#1-生成ipa包之后-先上传到服务器" class="headerlink" title="1. 生成ipa包之后,先上传到服务器"></a>1. 生成ipa包之后,先上传到服务器</h3><h3 id="2-然后将生成的链接写入到manifest-plist-的appURL里面-displayImageURL-fullSizeImageURL也是需要写的要不脚本跑不过-不过这俩可以随便写-我写的是https-www-baidu-com"><a href="#2-然后将生成的链接写入到manifest-plist-的appURL里面-displayImageURL-fullSizeImageURL也是需要写的要不脚本跑不过-不过这俩可以随便写-我写的是https-www-baidu-com" class="headerlink" title="2. 然后将生成的链接写入到manifest.plist 的appURL里面, displayImageURL, fullSizeImageURL也是需要写的要不脚本跑不过(不过这俩可以随便写 我写的是https://www.baidu.com)"></a>2. 然后将生成的链接写入到manifest.plist 的appURL里面, displayImageURL, fullSizeImageURL也是需要写的要不脚本跑不过(不过这俩可以随便写 我写的是<a href="https://www.baidu.com" target="_blank" rel="noopener">https://www.baidu.com</a>)</h3><h3 id="3-上传manifest-plist到服务器-得到url"><a href="#3-上传manifest-plist到服务器-得到url" class="headerlink" title="3. 上传manifest.plist到服务器,得到url"></a>3. 上传manifest.plist到服务器,得到url</h3><h3 id="4-将上传的manifest-plist的url拼接到itms-services-action-download-manifest-amp-url-manifestUrl这个链接的后面"><a href="#4-将上传的manifest-plist的url拼接到itms-services-action-download-manifest-amp-url-manifestUrl这个链接的后面" class="headerlink" title="4. 将上传的manifest.plist的url拼接到itms-services:///?action=download-manifest&amp;url=manifestUrl这个链接的后面"></a>4. 将上传的manifest.plist的url拼接到itms-services:///?action=download-manifest&amp;url=manifestUrl这个链接的后面</h3><h3 id="5-将itms-services-action-download-manifest-amp-url-manifestUrl链接生成二维码-扫描就可以安装app了"><a href="#5-将itms-services-action-download-manifest-amp-url-manifestUrl链接生成二维码-扫描就可以安装app了" class="headerlink" title="5. 将itms-services:///?action=download-manifest&amp;url=manifestUrl链接生成二维码, 扫描就可以安装app了"></a>5. 将itms-services:///?action=download-manifest&amp;url=manifestUrl链接生成二维码, 扫描就可以安装app了</h3><p><a href="https://www.jianshu.com/p/02d6aa0c320f" target="_blank" rel="noopener">参考链接</a><br><a href="https://www.jianshu.com/p/0de966e86481" target="_blank" rel="noopener">参考链接2</a></p>
<h2 id="最后的最后说明要想ipa包分发顺利manifest-plist文件一定要写的全"><a href="#最后的最后说明要想ipa包分发顺利manifest-plist文件一定要写的全" class="headerlink" title="最后的最后说明要想ipa包分发顺利manifest.plist文件一定要写的全"></a>最后的最后说明要想ipa包分发顺利manifest.plist文件一定要写的全</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span><br><span class="line">&lt;plist version=&quot;1.0&quot;&gt;</span><br><span class="line">&lt;dict&gt;</span><br><span class="line">    &lt;key&gt;items&lt;/key&gt;</span><br><span class="line">    &lt;array&gt;</span><br><span class="line">        &lt;dict&gt;</span><br><span class="line">            &lt;key&gt;assets&lt;/key&gt;</span><br><span class="line">            &lt;array&gt;</span><br><span class="line">                &lt;dict&gt;</span><br><span class="line">                    &lt;key&gt;kind&lt;/key&gt;</span><br><span class="line">                    &lt;string&gt;software-package&lt;/string&gt;</span><br><span class="line">                    &lt;key&gt;url&lt;/key&gt;</span><br><span class="line">                    &lt;string&gt;IPA的地址&lt;/string&gt;</span><br><span class="line">                &lt;/dict&gt;</span><br><span class="line">                &lt;dict&gt;</span><br><span class="line">                    &lt;key&gt;kind&lt;/key&gt;</span><br><span class="line">                    &lt;string&gt;display-image&lt;/string&gt;</span><br><span class="line">                    &lt;key&gt;url&lt;/key&gt;</span><br><span class="line">                    &lt;string&gt;57×57图片的地址&lt;/string&gt;</span><br><span class="line">                &lt;/dict&gt;</span><br><span class="line">                &lt;dict&gt;</span><br><span class="line">                    &lt;key&gt;kind&lt;/key&gt;</span><br><span class="line">                    &lt;string&gt;full-size-image&lt;/string&gt;</span><br><span class="line">                    &lt;key&gt;url&lt;/key&gt;</span><br><span class="line">                    &lt;string&gt;512×512图片的地址&lt;/string&gt;</span><br><span class="line">                &lt;/dict&gt;</span><br><span class="line">            &lt;/array&gt;</span><br><span class="line">            &lt;key&gt;metadata&lt;/key&gt;</span><br><span class="line">            &lt;dict&gt;</span><br><span class="line">                &lt;key&gt;bundle-identifier&lt;/key&gt;</span><br><span class="line">                &lt;string&gt;com.chamet.test&lt;/string&gt;</span><br><span class="line">                &lt;key&gt;bundle-version&lt;/key&gt;</span><br><span class="line">                &lt;string&gt;1.0.3&lt;/string&gt;</span><br><span class="line">                &lt;key&gt;kind&lt;/key&gt;</span><br><span class="line">                &lt;string&gt;software&lt;/string&gt;</span><br><span class="line">                &lt;key&gt;title&lt;/key&gt;</span><br><span class="line">                &lt;string&gt;MateMet&lt;/string&gt;</span><br><span class="line">            &lt;/dict&gt;</span><br><span class="line">        &lt;/dict&gt;</span><br><span class="line">    &lt;/array&gt;</span><br><span class="line">&lt;/dict&gt;</span><br><span class="line">&lt;/plist&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/自动化打包/">自动化打包</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-iOS组件化" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/02/10/iOS组件化/" class="article-date">
  	<time datetime="2023-02-10T02:55:06.000Z" itemprop="datePublished">2023-02-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/02/10/iOS组件化/">
        iOS项目组件化相关
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="组件化相关框架第三方"><a href="#组件化相关框架第三方" class="headerlink" title="组件化相关框架第三方"></a>组件化相关框架第三方</h1><hr>
<p><a href="https://zhuanlan.zhihu.com/p/349298875" target="_blank" rel="noopener">浅谈组件化</a></p>
<h2 id="1-天猫-CTMediator"><a href="#1-天猫-CTMediator" class="headerlink" title="1. 天猫 CTMediator"></a>1. 天猫 CTMediator</h2><h3 id="就是利用runtime-消息转发机制"><a href="#就是利用runtime-消息转发机制" class="headerlink" title="就是利用runtime 消息转发机制"></a>就是利用runtime 消息转发机制</h3><ul>
<li>1.首先创建CTMediator的分类 调用CTMediator的方法对target类和方法通过字符串的形式进行消息转发</li>
<li>2.在各个组件创建一个”Target_”前缀的target类用于CTMediator分类的runtime找到这个类名</li>
<li>3.在target类里面创建”Action_”前缀的方法, 用于CTMediator分类runtime找到方法名</li>
</ul>
<hr>
<h2 id="2-蘑菇街"><a href="#2-蘑菇街" class="headerlink" title="2. 蘑菇街"></a>2. 蘑菇街</h2><p>没研究 听说不如CTMediator好 就没看 听说哈 </p>
<hr>
<h2 id="3-有赞-Bifrost"><a href="#3-有赞-Bifrost" class="headerlink" title="3. 有赞 Bifrost"></a>3. 有赞 Bifrost</h2><h3 id="跟CTMediator差不多也是runtime消息转发机制-但是他是将各个组件都做成了静态库工程-项目层级是项目project文件下面各个组建的project文件"><a href="#跟CTMediator差不多也是runtime消息转发机制-但是他是将各个组件都做成了静态库工程-项目层级是项目project文件下面各个组建的project文件" class="headerlink" title="跟CTMediator差不多也是runtime消息转发机制, 但是他是将各个组件都做成了静态库工程, 项目层级是项目project文件下面各个组建的project文件"></a>跟CTMediator差不多也是runtime消息转发机制, 但是他是将各个组件都做成了静态库工程, 项目层级是项目project文件下面各个组建的project文件</h3><p><a href="https://tech.youzan.com/you-zan-ioszu-jian-hua-jia-gou-she-ji-shi-jian/" target="_blank" rel="noopener">官网说明地址</a></p>
<ul>
<li>1.创建一个.xcworkspace文件</li>
<li>2.通过xcode-&gt;file-&gt;new-&gt;project 在指定文件夹创建项目(.xcodeproj), 一定要在创建的时候选中第一步创建的.xcworkspace文件</li>
<li>3.通过xcode-&gt;file-&gt;new-&gt;lib…啥的创建各个静态库, 创建的时候也要选中第二步的项目文件</li>
<li>4.将所有组件需要公用的Common组件, 引入到所有的动态库和项目的”Build Setting” -&gt; “Header Search Paths”路径中 如(“$(SRCROOT)/../Common/Common/“)</li>
<li>5.需要公用的pod第三方需要在Podfile中修改, 如下</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">inhibit_all_warnings!</span><br><span class="line">platform :ios, &apos;10.0&apos;</span><br><span class="line"></span><br><span class="line">#disable some warnings</span><br><span class="line">post_install do |installer|</span><br><span class="line">    installer.pods_project.targets.each do |target|</span><br><span class="line">        target.build_configurations.each do |config|</span><br><span class="line">            #disable some warnings of Pods</span><br><span class="line">            config.build_settings[&apos;CLANG_WARN_DOCUMENTATION_COMMENTS&apos;] = &apos;NO&apos;</span><br><span class="line">            config.build_settings[&apos;IPHONEOS_DEPLOYMENT_TARGET&apos;] = &apos;8.0&apos;</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">#def commonPods()</span><br><span class="line">#    pod &apos;Common&apos;, :path =&gt; &apos;Modules/Common/&apos;</span><br><span class="line">#end</span><br><span class="line"></span><br><span class="line">def mediatorPods()</span><br><span class="line">    pod &apos;Bifrost&apos;</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">#将common公用文件夹链接设置到各个组件里 (这些方法是错误的, 具体方法没找到)</span><br><span class="line">def addCommonFile()</span><br><span class="line">#      :build_configurations.each do |config|</span><br><span class="line">#      #disable some warnings of Pods</span><br><span class="line">#      config.build_settings[&apos;HEADER_SEARCH_PATHS&apos;] = &apos;$(SRCROOT)/../Common/Common/&apos;</span><br><span class="line">#  end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">#在各自的对应的文件工程中导入想要的pod</span><br><span class="line">workspace &quot;GroupTest&quot;</span><br><span class="line">target &quot;GroupTestAPP&quot; do</span><br><span class="line">    project &apos;GroupTestAPP/GroupTestAPP.xcodeproj&apos;</span><br><span class="line">    target &quot;Common&quot; do</span><br><span class="line">        project &apos;Modules/Common/Common.xcodeproj&apos;</span><br><span class="line">        mediatorPods()</span><br><span class="line">    end</span><br><span class="line">    target &quot;Live&quot; do</span><br><span class="line">        project &apos;Modules/Live/Live.xcodeproj&apos;</span><br><span class="line">        mediatorPods()</span><br><span class="line">    end</span><br><span class="line">    target &quot;Home&quot;  do</span><br><span class="line">     # addCommonFile()</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<hr>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios开发/">ios开发</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-海外服务器购买搭建" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/05/25/海外服务器购买搭建/" class="article-date">
  	<time datetime="2022-05-25T07:45:44.000Z" itemprop="datePublished">2022-05-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/05/25/海外服务器购买搭建/">
        海外服务器购买搭建
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="海外服务器购买搭建"><a href="#海外服务器购买搭建" class="headerlink" title="海外服务器购买搭建"></a>海外服务器购买搭建</h1><hr>
<h2 id="服务器购买"><a href="#服务器购买" class="headerlink" title="服务器购买:"></a>服务器购买:</h2><p><a href="https://kvm.yunserver.com/clientarea.php?action=productdetails&amp;id=11365" target="_blank" rel="noopener">服务器购买链接</a></p>
<p><img src="/images/out_ear_sever-01.png" alt="&quot;image&quot;"></p>
<h2 id="本地服务器搭建"><a href="#本地服务器搭建" class="headerlink" title="本地服务器搭建"></a>本地服务器搭建</h2><h3 id="1-打开”终端”-左键图标-用户-’root’-上面服务器添加加号"><a href="#1-打开”终端”-左键图标-用户-’root’-上面服务器添加加号" class="headerlink" title="1. 打开”终端”, 左键图标 (用户:’root’), 上面服务器添加加号"></a>1. 打开”终端”, 左键图标 (用户:’root’), 上面服务器添加加号</h3><p><img src="/images/out_ear_sever-02.png" alt="&quot;image&quot;"></p>
<h3 id="2-点击链接弹出密码输入-输入服务器密码"><a href="#2-点击链接弹出密码输入-输入服务器密码" class="headerlink" title="2. 点击链接弹出密码输入, 输入服务器密码"></a>2. 点击链接弹出密码输入, 输入服务器密码</h3><h3 id="3-根据-这个网址-输入脚本"><a href="#3-根据-这个网址-输入脚本" class="headerlink" title="3. 根据 这个网址 输入脚本"></a>3. 根据 <a href="https://github.com/233boy/v2ray/wiki/V2Ray搭建详细图文教程" target="_blank" rel="noopener">这个网址</a> 输入脚本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -s -L https://git.io/v2ray.sh)</span><br></pre></td></tr></table></figure>
<p>选择websocket剩下一路enter</p>
<h3 id="4-搭建成功之后-输入v2ray-url-获取v2ray-需要的配置链接-目前链接如下"><a href="#4-搭建成功之后-输入v2ray-url-获取v2ray-需要的配置链接-目前链接如下" class="headerlink" title="4. 搭建成功之后 输入v2ray url 获取v2ray 需要的配置链接 目前链接如下:"></a>4. 搭建成功之后 输入v2ray url 获取v2ray 需要的配置链接 目前链接如下:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmess://ewoidiI6ICIyIiwKInBzIjogIjIzM3YyLmNvbV8xNTQuMTIuMzUuMTY4IiwKImFkZCI6ICIxNTQuMTIuMzUuMTY4IiwKInBvcnQiOiAiMjUxMTgiLAoiaWQiOiAiY2NjMzA3NWYtZGY4MS00MjllLWExNTgtYWNmNmYyYWQ3MWI5IiwKImFpZCI6ICIwIiwKIm5ldCI6ICJ3cyIsCiJ0eXBlIjogIm5vbmUiLAoiaG9zdCI6ICIiLAoicGF0aCI6ICIiLAoidGxzIjogIiIKfQo=</span><br></pre></td></tr></table></figure>
<h3 id="5-安装-V2rayU-选择如下"><a href="#5-安装-V2rayU-选择如下" class="headerlink" title="5. 安装:V2rayU, 选择如下:"></a>5. 安装:V2rayU, 选择如下:</h3><p><img src="/images/out_ear_sever-03.png" alt="&quot;image&quot;"><br>将4中链接粘贴到url框中就可以了, 选择全局模式</p>
<h2 id="注-如果还是无法连接看一下本地是否有占用代理端口的其他设置-部分参考"><a href="#注-如果还是无法连接看一下本地是否有占用代理端口的其他设置-部分参考" class="headerlink" title="注: 如果还是无法连接看一下本地是否有占用代理端口的其他设置, 部分参考:"></a>注: 如果还是无法连接看一下本地是否有占用代理端口的其他设置, 部分参考:</h2><p><a href="https://blog.csdn.net/qq_33182756/article/details/106644003" target="_blank" rel="noopener">本地端口重复的时候点这里</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术探索/">技术探索</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-自动打包笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/02/10/自动打包笔记/" class="article-date">
  	<time datetime="2022-02-10T03:42:33.000Z" itemprop="datePublished">2022-02-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/02/10/自动打包笔记/">
        自动打包服务器搭建
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Mac-mini-服务器环境配置"><a href="#Mac-mini-服务器环境配置" class="headerlink" title="Mac mini 服务器环境配置"></a>Mac mini 服务器环境配置</h1><h3 id="1-服务器账号密码"><a href="#1-服务器账号密码" class="headerlink" title="1. 服务器账号密码"></a>1. 服务器账号密码</h3><p>屏幕共享IP地址: 192.168.2.215(zerodisplay wifi下的ip 其他wifi自行查看)<br>账号: mac_mini_server<br>密码: 0uanQuan!</p>
<h3 id="2-苹果账号密码-杭州"><a href="#2-苹果账号密码-杭州" class="headerlink" title="2. 苹果账号密码(杭州)"></a>2. 苹果账号密码(杭州)</h3><p>账号: apply_for_sdk@zerozero.cn<br>密码: Zero00!#%</p>
<h3 id="3-环境配置"><a href="#3-环境配置" class="headerlink" title="3. 环境配置"></a>3. 环境配置</h3><p><a href="https://www.jianshu.com/p/e4342f421782?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation" target="_blank" rel="noopener">参考</a><br>安装HomeBrew环境: /bin/bash -c “$(curl -fsSL <a href="https://cdn.jsdelivr.net/gh/ineo6/homebrew-install/install.sh" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/ineo6/homebrew-install/install.sh</a>)”<br>安装yarn环境<br>安装RN环境<br>ios项目添加fastlane环境<br>ios项目添加cocopods环境: 1.8.4<br>配置Python 环境</p>
<h3 id="4-添加新的mini服务器"><a href="#4-添加新的mini服务器" class="headerlink" title="4. 添加新的mini服务器"></a>4. 添加新的mini服务器</h3><p>找帅平在master服务器上添加新的mini服务器配置<br><img src="/images/mac_mini_config1.png" alt="&quot;image&quot;"><br><img src="/images/mac_mini_config2.png" alt="&quot;image&quot;"></p>
<p>将新mini的git 公钥配置到git上: <a href="https://blog.csdn.net/huqiankunlol/article/details/93485719" target="_blank" rel="noopener">https://blog.csdn.net/huqiankunlol/article/details/93485719</a> (当前新的mini的注册邮箱是: mac_server_new@zerozero.cn 密码:0uanQuan!)<br>注意: 拉取的git账号用上面那个没法设置成功所以我按照旧的mac mini上的那个配置改成了如下图所示<br><img src="/images/mac_mini_config3.png" alt="&quot;image&quot;"></p>
<h3 id="5-yarn-install出错的时候可能是node版本错误-目前稳定的版本是node-v10-15-3"><a href="#5-yarn-install出错的时候可能是node版本错误-目前稳定的版本是node-v10-15-3" class="headerlink" title="5. yarn install出错的时候可能是node版本错误, 目前稳定的版本是node v10.15.3"></a>5. yarn install出错的时候可能是node版本错误, 目前稳定的版本是node v10.15.3</h3><h3 id="6-将新电脑设置的git账号-当前新的mini的注册邮箱是-mac-server-new-zerozero-cn-密码-0uanQuan-在git相关的权限都打开-比如GPUImage这些加锁的库-最好就是搞成owner就行了"><a href="#6-将新电脑设置的git账号-当前新的mini的注册邮箱是-mac-server-new-zerozero-cn-密码-0uanQuan-在git相关的权限都打开-比如GPUImage这些加锁的库-最好就是搞成owner就行了" class="headerlink" title="6. 将新电脑设置的git账号(当前新的mini的注册邮箱是: mac_server_new@zerozero.cn 密码:0uanQuan!) 在git相关的权限都打开, 比如GPUImage这些加锁的库, 最好就是搞成owner就行了"></a>6. 将新电脑设置的git账号(当前新的mini的注册邮箱是: mac_server_new@zerozero.cn 密码:0uanQuan!) 在git相关的权限都打开, 比如GPUImage这些加锁的库, 最好就是搞成owner就行了</h3><h3 id="7-安装gem是需要输入mac密码的解决-https-www-cnblogs-com-lwh-note-p-10208274-html"><a href="#7-安装gem是需要输入mac密码的解决-https-www-cnblogs-com-lwh-note-p-10208274-html" class="headerlink" title="7. 安装gem是需要输入mac密码的解决: https://www.cnblogs.com/lwh-note/p/10208274.html"></a>7. 安装gem是需要输入mac密码的解决: <a href="https://www.cnblogs.com/lwh-note/p/10208274.html" target="_blank" rel="noopener">https://www.cnblogs.com/lwh-note/p/10208274.html</a></h3><p>echo ‘[[ -s “$HOME/.rvm/scripts/rvm” ]] &amp;&amp; . “$HOME/.rvm/scripts/rvm”‘ &gt;&gt;~/.bashrc<br>source ~/.bashrc<br>ruby -v</p>
<h3 id="8-所有的非上线版本都是用北京的账号中的企业证书申请的-wangmengqiu-zerozero-cn-上线的证书是杭州证书-apply-for-sdk-zerozero-cn"><a href="#8-所有的非上线版本都是用北京的账号中的企业证书申请的-wangmengqiu-zerozero-cn-上线的证书是杭州证书-apply-for-sdk-zerozero-cn" class="headerlink" title="8. 所有的非上线版本都是用北京的账号中的企业证书申请的(wangmengqiu@zerozero.cn), 上线的证书是杭州证书(apply_for_sdk@zerozero.cn)"></a>8. 所有的非上线版本都是用北京的账号中的企业证书申请的(wangmengqiu@zerozero.cn), 上线的证书是杭州证书(apply_for_sdk@zerozero.cn)</h3><h3 id="9-所有的线上和企业证书都是从旧的mac-mini上生成导出的-p12文件-有时间得做一下新的证书了"><a href="#9-所有的线上和企业证书都是从旧的mac-mini上生成导出的-p12文件-有时间得做一下新的证书了" class="headerlink" title="9. 所有的线上和企业证书都是从旧的mac mini上生成导出的.p12文件(有时间得做一下新的证书了)"></a>9. 所有的线上和企业证书都是从旧的mac mini上生成导出的.p12文件(有时间得做一下新的证书了)</h3><h3 id="10-证书点击第一次的系统信任问题-https-blog-csdn-net-sodaslay-article-details-51438273"><a href="#10-证书点击第一次的系统信任问题-https-blog-csdn-net-sodaslay-article-details-51438273" class="headerlink" title="10. 证书点击第一次的系统信任问题: https://blog.csdn.net/sodaslay/article/details/51438273"></a>10. 证书点击第一次的系统信任问题: <a href="https://blog.csdn.net/sodaslay/article/details/51438273" target="_blank" rel="noopener">https://blog.csdn.net/sodaslay/article/details/51438273</a></h3><p><a href="https://blog.csdn.net/sodaslay/article/details/51438273" target="_blank" rel="noopener">https://blog.csdn.net/sodaslay/article/details/51438273</a><br>以上链接是参考链接, 看看就好了, 解决方案在下面:<br>其实就是去xcode里面点一下 信任这个mac就好了, 注意 钥匙串里面的证书千万别点始终信任, 一定要系统默认,<br>然后一地次用xcode 手动archive 会出现输密码的框, 点击始终允许就可以了, 这个搞了我一天, 烦死了</p>
<h3 id="11-将需要改为新服务机的ci项目修改一下节点服务器就可以了-如下图"><a href="#11-将需要改为新服务机的ci项目修改一下节点服务器就可以了-如下图" class="headerlink" title="11. 将需要改为新服务机的ci项目修改一下节点服务器就可以了, 如下图:"></a>11. 将需要改为新服务机的ci项目修改一下节点服务器就可以了, 如下图:</h3><p><img src="/images/mac_mini_config4.png" alt="&quot;image&quot;"></p>
<h3 id="12-master包第一次跑务必在新的mac-mini终端上-跑ci最后的哪句fastlane的语句-因为会在终端让你输入当时第一次设置的密码Passphrase-for-Match-storage-密码为-00-Wuxian-输入两次-记住啦-之前开发的同事没有记录-我挨个试了一个多小时-心累"><a href="#12-master包第一次跑务必在新的mac-mini终端上-跑ci最后的哪句fastlane的语句-因为会在终端让你输入当时第一次设置的密码Passphrase-for-Match-storage-密码为-00-Wuxian-输入两次-记住啦-之前开发的同事没有记录-我挨个试了一个多小时-心累" class="headerlink" title="12. master包第一次跑务必在新的mac mini终端上 跑ci最后的哪句fastlane的语句, 因为会在终端让你输入当时第一次设置的密码Passphrase for Match storage: 密码为: 00@Wuxian 输入两次 记住啦 之前开发的同事没有记录, 我挨个试了一个多小时, 心累!!!"></a>12. master包第一次跑务必在新的mac mini终端上 跑ci最后的哪句fastlane的语句, 因为会在终端让你输入当时第一次设置的密码Passphrase for Match storage: 密码为: 00@Wuxian 输入两次 记住啦 之前开发的同事没有记录, 我挨个试了一个多小时, 心累!!!</h3><h3 id="ps-CI环境配置-服务器搭建gitlab并配置CI-CD-jenkins方式"><a href="#ps-CI环境配置-服务器搭建gitlab并配置CI-CD-jenkins方式" class="headerlink" title="ps. CI环境配置(服务器搭建gitlab并配置CI/CD, jenkins方式)"></a>ps. CI环境配置(服务器搭建gitlab并配置CI/CD, jenkins方式)</h3><p>用不到这种ps中的方法搭建,直接总的master服务器添加新的mini就可以了, 找帅平搞定<br><a href="https://www.jianshu.com/p/5eda1a35246b?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation" target="_blank" rel="noopener">参考链接</a><br><a href="https://zerozero.yuque.com/app-dev/cgkemh/nctp13" target="_blank" rel="noopener">参考2</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/自动化打包/">自动化打包</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-iOS RN热更新" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2021/04/23/iOS RN热更新/" class="article-date">
  	<time datetime="2021-04-23T07:55:06.000Z" itemprop="datePublished">2021-04-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/23/iOS RN热更新/">
        iOS RN热更新
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="iOS-RN热更新"><a href="#iOS-RN热更新" class="headerlink" title="iOS RN热更新"></a>iOS RN热更新</h1><hr>
<h2 id="CodePush-RN库"><a href="#CodePush-RN库" class="headerlink" title="CodePush RN库"></a>CodePush RN库</h2><p>链接: </p>
<ol>
<li><p><a href="https://www.jianshu.com/p/3b0cb280eb19?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation" target="_blank" rel="noopener">https://www.jianshu.com/p/3b0cb280eb19?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation</a></p>
</li>
<li><p><a href="https://github.com/microsoft/react-native-code-push/blob/master/docs/setup-ios.md" target="_blank" rel="noopener">https://github.com/microsoft/react-native-code-push/blob/master/docs/setup-ios.md</a></p>
</li>
<li><a href="https://www.jianshu.com/p/cd7576af381f" target="_blank" rel="noopener">https://www.jianshu.com/p/cd7576af381f</a></li>
</ol>
<h2 id="APPcenter-codepush语法"><a href="#APPcenter-codepush语法" class="headerlink" title="APPcenter codepush语法"></a>APPcenter codepush语法</h2><p><a href="https://www.jianshu.com/p/d51967964a81" target="_blank" rel="noopener">https://www.jianshu.com/p/d51967964a81</a><br><a href="https://blog.csdn.net/ybf326/article/details/102735264" target="_blank" rel="noopener">https://blog.csdn.net/ybf326/article/details/102735264</a></p>
<h2 id="Xcode项目修改"><a href="#Xcode项目修改" class="headerlink" title="Xcode项目修改:"></a>Xcode项目修改:</h2><p><img src="/images/codepush_1.png" alt="&quot;image&quot;"><br><img src="/images/codepush_2.png" alt="&quot;image&quot;"><br><img src="/images/codepush_3.png" alt="&quot;image&quot;"></p>
<h2 id="脚本代码"><a href="#脚本代码" class="headerlink" title="脚本代码:"></a>脚本代码:</h2><ol>
<li>进入到rn项目文件夹中: cd xxx/</li>
<li><code>yarn global add appcenter-cli</code> 安装appcenter-cli环境 完事后 <code>appcenter --version1</code> 判断安装是否成功</li>
<li><code>appcenter codepush release-react -a apply_for_sdk-zerozero.cn/V-Coptr-ios -d Staging -c ./CodePush -t 1.0.0 --description &quot;提交描述&quot;</code> 来更新代码, 具体其他命令可以看上面的链接</li>
</ol>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios开发/">ios开发</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-主播相关" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/11/25/主播相关/" class="article-date">
  	<time datetime="2020-11-25T02:55:06.000Z" itemprop="datePublished">2020-11-25</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/25/主播相关/">
        关于主播相关的记录与备忘
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="第一期话题选定与记录"><a href="#第一期话题选定与记录" class="headerlink" title="第一期话题选定与记录"></a>第一期话题选定与记录</h1><hr>
<h2 id="1-疫情相关话题"><a href="#1-疫情相关话题" class="headerlink" title="1. 疫情相关话题"></a>1. 疫情相关话题</h2><ul>
<li><p>1.1 当今新冠现状, 感染范围以及疫情时长持续性</p>
</li>
<li><p>1.2 疫苗进展, 国际形势</p>
</li>
<li><p>1.3 古今中外几大瘟疫爆发历史(埃博拉, 黑死病, 鼠疫等)</p>
</li>
<li><p>1.4 传染疾病的预防与控制</p>
</li>
<li><p>1.5 欢迎收听,开业大吉</p>
</li>
</ul>
<hr>
<h2 id="2-婚姻相关话题-下次补全"><a href="#2-婚姻相关话题-下次补全" class="headerlink" title="2. 婚姻相关话题(下次补全)"></a>2. 婚姻相关话题(下次补全)</h2><hr>
<h2 id="3-未想好"><a href="#3-未想好" class="headerlink" title="3. 未想好"></a>3. 未想好</h2>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/主播相关/">主播相关</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-自动打包服务器" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/10/23/自动打包服务器/" class="article-date">
  	<time datetime="2020-10-23T03:42:33.000Z" itemprop="datePublished">2020-10-23</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/10/23/自动打包服务器/">
        Jenkins + Fastlane 自动打包
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="自动打包"><a href="#自动打包" class="headerlink" title="自动打包"></a>自动打包</h1><p><a href="https://www.jenkins.io" target="_blank" rel="noopener">Jenkins官网</a></p>
<p><a href="https://fastlane.tools" target="_blank" rel="noopener">fastlane</a></p>
<p>fastlane 用于自动打包</p>
<p>jenkins 用于管理git上传代码 (内部跑fastlane的shell 脚本)</p>
<hr>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><a href="https://www.jianshu.com/p/0a113f754c09" target="_blank" rel="noopener">Jenkins + Fastlane + GitLab + 蒲公英</a></p>
<p><a href="https://www.jianshu.com/p/be2d3b919633" target="_blank" rel="noopener">https://www.jianshu.com/p/be2d3b919633</a></p>
<p><a href="https://www.cnblogs.com/zhujin/p/9064820.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhujin/p/9064820.html</a></p>
<p><a href="https://www.jianshu.com/p/c4abfbf1c9d7" target="_blank" rel="noopener">Jenkins + Fastlane + GitLab + fir</a></p>
<p><a href="https://www.jianshu.com/p/44bbe1a31b52" target="_blank" rel="noopener">fastlane 实现自定义Action</a></p>
<hr>
<h3 id="Fastlane环境搭建"><a href="#Fastlane环境搭建" class="headerlink" title="Fastlane环境搭建"></a>Fastlane环境搭建</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">现在对Appfile，Fastfile，Gemfile，Deliverfile文件说明如下：</span><br><span class="line"></span><br><span class="line">Appfile: 存储有关开发者账号相关信息</span><br><span class="line">Fastfile: 核心文件，用于命令行调用和处理具体的流程，lane相对于一个action方法或函数 </span><br><span class="line">Gemfile 类似于cocopods 的Podfile文件</span><br><span class="line">.env 配置环境变量（在fastlane init进行初始化后并不会自动生成，如果需要可以自己创建</span><br><span class="line">Deliverfile: deliver工具的配置文件，上传截图苹果和后台一些app信息  (默认不生成，需要sudo gem install deliver安装)然后在fastlane 目录下执行deliver init 即可）</span><br><span class="line">要注意的点：</span><br><span class="line">build_app命令等同于gym(别名)</span><br><span class="line">deliver 命令相当于upload_to_app_store(别名)</span><br></pre></td></tr></table></figure>
<p>1.检查Ruby版本，需要2.0及以上版本。在终端输入以下命令确认：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -v</span><br></pre></td></tr></table></figure>
<p>需要注意的是需要将gem的source改为<a href="https://link.jianshu.com/?t=https://gems.ruby-china.org/" target="_blank" rel="noopener">https://gems.ruby-china.org/</a>。<br>如何检查?在终端输入以下命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem sources</span><br></pre></td></tr></table></figure>
<p>结果应为：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*** CURRENT SOURCES ***</span><br><span class="line"></span><br><span class="line">https:<span class="comment">//gems.ruby-china.org/</span></span><br></pre></td></tr></table></figure>
<p>2.检查Xcode命令行工具是否安装。在终端输入以下命令：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcode-<span class="keyword">select</span> --install</span><br></pre></td></tr></table></figure>
<p>如果没有安装会进行安装。如果已经安装了则会提示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcode-select: error: <span class="built_in">command</span> line tools are already installed, use <span class="string">"Software Update"</span> to install updates</span><br></pre></td></tr></table></figure>
<p>3.安装Fastlane</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install fastlane --verbose</span><br></pre></td></tr></table></figure>
<p>如果出现以下错误：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR:  <span class="keyword">While</span> executing gem ... (Errno::EPERM)</span><br><span class="line">    Operation not permitted - /usr/bin/rougify</span><br></pre></td></tr></table></figure>
<p>则输入以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install -n /usr/<span class="built_in">local</span>/bin fastlane</span><br></pre></td></tr></table></figure>
<p>4.检查Fastlane是否正确安装。输入以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane --version</span><br></pre></td></tr></table></figure>
<p>可以看到Fastlane版本信息，我的是2.46.1。</p>
<p>5.进入项目根目录创建faslane</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane init</span><br></pre></td></tr></table></figure>
<p>中间会让你输入苹果开发者账号的账号和密码，之后会在你项目工程的目录下生成一个fastlane文件夹，里面有Fastlane的配置文件，一个是Appfile文件，一个是Fastfile文件(如果要上传AppStore的话还有Deliverfile文件)。Appfile保存苹果开发者的相关信息、项目的相关信息等。Fastfile是运行脚本。</p>
<p>信息选择如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[15:08:29]: What would you like to use fastlane for?</span><br><span class="line">1. 📸  Automate screenshots</span><br><span class="line">2. 👩‍✈️  Automate beta distribution to TestFlight</span><br><span class="line">3. 🚀  Automate App Store distribution</span><br><span class="line">4. 🛠  Manual setup - manually setup your project to automate your tasks</span><br><span class="line">?  </span><br><span class="line"></span><br><span class="line">翻译：</span><br><span class="line">1. 自动截屏。这个功能能帮我们自动截取APP中的截图，并添加手机边框（如果需要的话），我们这里不选择这个选项，因为我们的项目已经有图片了，不需要这里截屏。</span><br><span class="line">2. 自动发布beta版本用于TestFlight，如果大家有对TestFlight不了解的，可以参考王巍写的这篇文章</span><br><span class="line">3. 自动的App Store发布包。我们的目标是要提交审核到APP Store，按道理应该选这个，但这里我们先不选，因为选择了以后会需要输入用户名密码，以及下载meta信息，需要花费一定时间，这些数据我们可以后期进行配置。</span><br><span class="line">4. 手动设置。</span><br></pre></td></tr></table></figure>
<p>6.如果是蒲公英的话</p>
<p>打开终端，进入你的项目工程的根目录，输入以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane add_plugin pgyer</span><br></pre></td></tr></table></figure>
<p>出现</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Plugin <span class="string">'fastlane-plugin-pgyer'</span> was added to <span class="string">'./fastlane/Pluginfile'</span></span><br><span class="line">It looks like fastlane plugins are not yet <span class="keyword">set</span> up <span class="keyword">for</span> <span class="keyword">this</span> project.</span><br><span class="line">fastlane will create a <span class="keyword">new</span> Gemfile at path <span class="string">'Gemfile'</span></span><br><span class="line">This change <span class="keyword">is</span> necessary <span class="keyword">for</span> fastlane plugins to work</span><br><span class="line">Should fastlane modify the Gemfile at path <span class="string">'Gemfile'</span> <span class="keyword">for</span> you?</span><br><span class="line">(y/n)</span><br></pre></td></tr></table></figure>
<p>输入y按回车，出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Installing plugin dependencies...</span><br><span class="line">Successfully installed plugins</span><br></pre></td></tr></table></figure>
<p>便是安装成功了。</p>
<p>如果是fir的话</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane add_plugin fir</span><br></pre></td></tr></table></figure>
<p>如果出现报错如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Could not find action, lane or variable &apos;firim&apos;. Check out the documentation for more details: https://docs.fastlane.tools/actions</span><br></pre></td></tr></table></figure></p>
<p>使用命令行:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane add_plugin firim</span><br></pre></td></tr></table></figure></p>
<p>Fastfile文件内容(Fastfile内容不要用textEit去编辑, 用终端或者textsublime)<br>注意: 以下脚本想要运行需要xocde的info”Bundle version” 手动改为1.0, 而不是$(PRODUCT_BUNDLE_IDENTIFIER)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"># This file contains the fastlane.tools configuration</span><br><span class="line"># You can find the documentation at https://docs.fastlane.tools</span><br><span class="line">#</span><br><span class="line"># For a list of all available actions, check out</span><br><span class="line">#</span><br><span class="line">#     https://docs.fastlane.tools/actions</span><br><span class="line">#</span><br><span class="line"># For a list of all available plugins, check out</span><br><span class="line">#</span><br><span class="line">#     https://docs.fastlane.tools/plugins/available-plugins</span><br><span class="line">#</span><br><span class="line"></span><br><span class="line"># Uncomment the line if you want fastlane to automatically update itself</span><br><span class="line"># update_fastlane</span><br><span class="line"></span><br><span class="line">default_platform(:ios)</span><br><span class="line"># 自动更定bulid号 但是因为Jenkins也可以设置所以可用可不用</span><br><span class="line">def updateProjectBuildNumber</span><br><span class="line">    currentTime = Time.new.strftime(&quot;%Y%m%d&quot;)</span><br><span class="line">    build = get_build_number()</span><br><span class="line">    if build.include?&quot;#&#123;currentTime&#125;.&quot;</span><br><span class="line">    # =&gt; 为当天版本 计算迭代版本号</span><br><span class="line">    lastStr = build[build.length-2..build.length-1]</span><br><span class="line">    lastNum = lastStr.to_i</span><br><span class="line">    lastNum = lastNum + 1</span><br><span class="line">    lastStr = lastNum.to_s</span><br><span class="line">    if lastNum &lt; 10</span><br><span class="line">    lastStr = lastStr.insert(0,&quot;0&quot;)</span><br><span class="line">    end</span><br><span class="line">    build = &quot;#&#123;currentTime&#125;.#&#123;lastStr&#125;&quot;</span><br><span class="line">    else</span><br><span class="line">    # =&gt; 非当天版本 build 号重置</span><br><span class="line">    build = &quot;#&#123;currentTime&#125;.01&quot;</span><br><span class="line">    end</span><br><span class="line">    puts(&quot;*************| 更新build #&#123;build&#125; |*************&quot;)</span><br><span class="line">    # =&gt; 更改项目 build 号</span><br><span class="line">    increment_build_number(</span><br><span class="line">    build_number: &quot;#&#123;build&#125;&quot;</span><br><span class="line">    )</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">#指定项目的scheme名称</span><br><span class="line">scheme=“BirdieCameraDemo”</span><br><span class="line"></span><br><span class="line">platform :ios do</span><br><span class="line">  lane :development_build do|options|</span><br><span class="line">  branch = options[:branch]</span><br><span class="line"></span><br><span class="line">  puts “开始打development ipa”</span><br><span class="line"></span><br><span class="line">  updateProjectBuildNumber #更改项目build号</span><br><span class="line"></span><br><span class="line">  # 开始打包</span><br><span class="line">  #gym 括号里面的就是Fastlane的动作</span><br><span class="line">  gym(</span><br><span class="line">  #输出的ipa名称</span><br><span class="line">  output_name:”#&#123;scheme&#125;_#&#123;get_build_number()&#125;”,</span><br><span class="line">  # 是否清空以前的编译信息 true：是</span><br><span class="line">  clean:true,</span><br><span class="line">  # 指定打包方式，Release 或者 Debug</span><br><span class="line">  configuration:&quot;Release&quot;,</span><br><span class="line">  # 指定打包所使用的输出方式，目前支持app-store, package, ad-hoc, enterprise, development</span><br><span class="line">  export_method:&quot;development&quot;,</span><br><span class="line">  # 指定输出文件夹</span><br><span class="line">  output_directory:&quot;./fastlane/build&quot;,</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  puts &quot;开始上传fir&quot;</span><br><span class="line">  # 开始上传fir</span><br><span class="line">  firim(firim_api_token: &quot;b86d85e22b89841941eda59b0385fc89&quot;) # token 在fir 上查看。</span><br><span class="line">  end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Jenkins环境搭建"><a href="#Jenkins环境搭建" class="headerlink" title="Jenkins环境搭建"></a>Jenkins环境搭建</h3><h6 id="本地jenkins环境搭建"><a href="#本地jenkins环境搭建" class="headerlink" title="本地jenkins环境搭建"></a>本地jenkins环境搭建</h6><p>Jenkins 是一个开源项目，提供了一种易于使用的持续集成系统，使开发者从繁杂的集成中解脱出来，专注于更为重要的业务逻辑实现上。同时 Jenkins 能实施监控集成中存在的错误，提供详细的日志文件和提醒功能，还能用图表的形式形象地展示项目构建的趋势和稳定性。</p>
<p>1.点击 <a href="https://link.jianshu.com/?t=http://mirrors.jenkins.io/war-stable/latest/jenkins.war" target="_blank" rel="noopener">http://mirrors.jenkins.io/war-stable/latest/jenkins.war</a> 下载最新的Jenkins.war</p>
<p>2.打开终端，进入war包所在目录，执行以下命令：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">java</span> <span class="selector-tag">-jar</span> <span class="selector-tag">jenkins</span><span class="selector-class">.war</span></span><br></pre></td></tr></table></figure>
<p>注意：Jenkins依赖于Java运行环境，因此需要首先安装JDK,下载地址：<a href="https://link.jianshu.com/?t=http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p>
<p>3.执行完成之后打开浏览器输入<a href="https://link.jianshu.com/?t=http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a></p>
<p>4.弹出Jenkins安装界面，会让你输入安全密码,输入完成之后选择默认安装。</p>
<p>5.新建管理员账号密码</p>
<p>对以上过程有疑问的话可以参考<a href="https://www.jianshu.com/p/41ecb06ae95f" target="_blank" rel="noopener">手把手教你利用Jenkins持续集成iOS项目</a></p>
<h4 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h4><p>还是登录<a href="https://link.jianshu.com/?t=http://localhost:8080/" target="_blank" rel="noopener">http://localhost:8080/</a> ，选择系统管理 - 管理插件。</p>
<p>安装GitLab插件<br>在可选插件中选择GitLab Plugin和Gitlab Hook Plugin进行安装。</p>
<p>安装Xcode插件<br>在可选插件中选择Xcode integration进行安装。</p>
<p>安装完成之后，我们就可以配置构建项目了。</p>
<h4 id="构建任务"><a href="#构建任务" class="headerlink" title="构建任务"></a>构建任务</h4><p>1.点击新建，输入名称，构建一个自由风格的软件项目</p>
<p><img src="/images/autoRelease1.png" alt="&quot;image&quot;"></p>
<p>2.配置Git</p>
<p><img src="/images/autoRelease2.png" alt="&quot;image&quot;"></p>
<p>添加Git仓库地址，可以是HTTP也可以是SSH。点击Add</p>
<p>如果是HTTP</p>
<p><img src="/images/autoRelease3.png" alt="&quot;image&quot;"></p>
<p>如果是SSH</p>
<p><img src="/images/autoRelease4.png" alt="&quot;image&quot;"></p>
<p>3.配置脚本</p>
<p><img src="/images/autoRelease5.png" alt="&quot;image&quot;"></p>
<p>所以在执行fastlane development_build之前需要进入TestCI(项目/iOS)目录，即fastlane文件夹所在目录。</p>
<p>4.添加完成之后点击立即构建</p>
<p><img src="/images/autoRelease6.png" alt="&quot;image&quot;"></p>
<p>5.执行成功显示如下</p>
<p><img src="/images/autoRelease7.png" alt="&quot;image&quot;"></p>
<hr>
<p>自己项目里面的jenkins截图</p>
<p><img src="/images/autoRelease8.png" alt="&quot;image&quot;"></p>
<p><img src="/images/autoRelease9.png" alt="&quot;image&quot;"></p>
<p><img src="/images/autoRelease10.png" alt="&quot;image&quot;"></p>
<p><img src="/images/autoRelease11.png" alt="&quot;image&quot;"></p>
<p><img src="/images/autoRelease12.png" alt="&quot;image&quot;"></p>
<h5 id="jenkins-内部shell-自动打包脚本"><a href="#jenkins-内部shell-自动打包脚本" class="headerlink" title="jenkins 内部shell 自动打包脚本"></a>jenkins 内部shell 自动打包脚本</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># git相关操作重置 / 清理</span><br><span class="line">git reset --hard</span><br><span class="line">git clean -f</span><br><span class="line"></span><br><span class="line"># 因为是rn项目 删除reactnative 相关文件夹 </span><br><span class="line">rm -rf node_modules &amp; rm -rf yarn.lock</span><br><span class="line">#重新更新reactnavite 内容</span><br><span class="line">yarn install  #cd--verbose</span><br><span class="line">cd ios #进入ios项目文件夹</span><br><span class="line"># 删除pod相关文件夹</span><br><span class="line">rm -rf pods &amp; rm -rf Podfile.lock</span><br><span class="line">#pod 项目</span><br><span class="line">pod install --verbose --no-repo-update</span><br><span class="line"># bundle用于运行fastlane中的Gemfile文件内容</span><br><span class="line">#fastlane 用于跑fastlane/Fastfile中的代码(同上已写) </span><br><span class="line">#development_build 方法是Fastfile中放出来的shell 方法名</span><br><span class="line">bundle install &amp;&amp; bundle exec fastlane development_build</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="podfile有一句代码需要备注"><a href="#podfile有一句代码需要备注" class="headerlink" title="podfile有一句代码需要备注"></a>podfile有一句代码需要备注</h4><p><a href="https://www.jianshu.com/p/b8b889610b7e" target="_blank" rel="noopener">Podfile文件用法详解</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#便利修改pods文件中各个库的setting设置</span><br><span class="line">#post_install 安装前的设置操作</span><br><span class="line"> post_install do |installer|</span><br><span class="line">    installer.pods_project.targets.each do |target|</span><br><span class="line">      target.build_configurations.each do |config|</span><br><span class="line">          config.build_settings[&apos;CLANG_WARN_QUOTED_INCLUDE_IN_FRAMEWORK_HEADER&apos;] = &apos;NO&apos;</span><br><span class="line">        end</span><br><span class="line">      end</span><br><span class="line">  end</span><br></pre></td></tr></table></figure>
<hr>
<hr>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/自动化打包/">自动化打包</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-怎么发布博客文章:图片视频添加" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2020/02/26/怎么发布博客文章:图片视频添加/" class="article-date">
  	<time datetime="2020-02-26T07:21:04.000Z" itemprop="datePublished">2020-02-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/02/26/怎么发布博客文章:图片视频添加/">
        怎么发布博客文章/图片视频添加
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="hexo环境搭建参考链接"><a href="#hexo环境搭建参考链接" class="headerlink" title="hexo环境搭建参考链接"></a>hexo环境搭建参考链接</h3><p><a href="https://blog.csdn.net/sinat_37781304/article/details/82729029" target="_blank" rel="noopener">点击这里哈,谢谢人家</a></p>
<h3 id="cd-到-blog-source-目录"><a href="#cd-到-blog-source-目录" class="headerlink" title="cd 到 ../blog/source 目录"></a>cd 到 ../blog/source 目录</h3><h3 id="建一个新项目"><a href="#建一个新项目" class="headerlink" title="建一个新项目"></a>建一个新项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="跑本地服务"><a href="#跑本地服务" class="headerlink" title="跑本地服务"></a>跑本地服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="发布之前一定要先clean"><a href="#发布之前一定要先clean" class="headerlink" title="发布之前一定要先clean"></a>发布之前一定要先clean</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br></pre></td></tr></table></figure>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>
<hr>
<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://www.jianshu.com/p/1fb65c61fa4a" target="_blank" rel="noopener">hexo常用命令笔记</a></p>
<p><a href="http://blog.csdn.net/qq_26891045/article/details/51693571" target="_blank" rel="noopener">hexo博客添加图片，音乐，视频</a></p>
<h3 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h3><h4 id="插入外部链接图片"><a href="#插入外部链接图片" class="headerlink" title="插入外部链接图片"></a>插入外部链接图片</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[cpp] view plain copy</span><br><span class="line">![“图片描述”](“图片地址”)</span><br></pre></td></tr></table></figure>
<h4 id="添加本地图片"><a href="#添加本地图片" class="headerlink" title="添加本地图片"></a>添加本地图片</h4><p>在\hexo\source目录下新建文件夹，命名为images或者其他你喜欢的名字，然后编辑你的md博文，插入下面的代码样式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[cpp] view plain copy</span><br><span class="line">![“图片描述”](/images/你的图片名字.JPG)</span><br></pre></td></tr></table></figure>
<h4 id="插入音乐"><a href="#插入音乐" class="headerlink" title="插入音乐"></a>插入音乐</h4><p>比如网易云音乐，找到喜欢的歌曲，点击分享按钮，把里面的代码复制下来，直接粘贴到博文中即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[cpp] view plain copy</span><br><span class="line">&lt;iframe frameborder=&quot;no&quot; border=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; width=330 height=86</span><br><span class="line">src=&quot;http://music.163.com/outchain/player?type=2&amp;id=25706282&amp;auto=0&amp;height=66&quot;&gt;</span><br><span class="line">&lt;/iframe&gt;</span><br></pre></td></tr></table></figure>
<h4 id="插入视频"><a href="#插入视频" class="headerlink" title="插入视频"></a>插入视频</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[cpp] view plain copy</span><br><span class="line">Idina Menze和Caleb Hyles激情对唱Let It Go：</span><br><span class="line">&lt;iframe</span><br><span class="line">height=498 width=510</span><br><span class="line">src=&quot;http://player.youku.com/embed/XNjcyMDU4Njg0&quot;</span><br><span class="line">frameborder=0 allowfullscreen&gt;</span><br><span class="line">&lt;/iframe&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo探索/">hexo探索</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-Python探索" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/01/18/Python探索/" class="article-date">
  	<time datetime="2018-01-18T07:50:33.000Z" itemprop="datePublished">2018-01-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/18/Python探索/">
        Python探索
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Python探索"><a href="#Python探索" class="headerlink" title="Python探索"></a>Python探索</h1><p>python语言探索开发:</p>
<h2 id="参考网址"><a href="#参考网址" class="headerlink" title="参考网址:"></a>参考网址:</h2><h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><p><a href="http://blog.sina.com.cn/s/blog_62d4d5900102v0c6.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_62d4d5900102v0c6.html</a></p>
<p>保存两个版本python:</p>
<p><a href="https://www.jianshu.com/p/51811fa24752/" target="_blank" rel="noopener">https://www.jianshu.com/p/51811fa24752/</a></p>
<h3 id="语言讲解"><a href="#语言讲解" class="headerlink" title="语言讲解"></a>语言讲解</h3><p><a href="https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014316090478912dab2a3a9e8f4ed49d28854b292f85bb000" target="_blank" rel="noopener">https://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014316090478912dab2a3a9e8f4ed49d28854b292f85bb000</a></p>
<p><a href="http://www.runoob.com/python/python-tutorial.html" target="_blank" rel="noopener">http://www.runoob.com/python/python-tutorial.html</a></p>
<h3 id="冲顶大会脚本地址"><a href="#冲顶大会脚本地址" class="headerlink" title="冲顶大会脚本地址"></a>冲顶大会脚本地址</h3><p><a href="https://github.com/steveyg/AnswerHelper" target="_blank" rel="noopener">https://github.com/steveyg/AnswerHelper</a></p>
<h2 id="探索小结"><a href="#探索小结" class="headerlink" title="探索小结"></a>探索小结</h2><h3 id="1-文本编辑器"><a href="#1-文本编辑器" class="headerlink" title="1.文本编辑器"></a>1.文本编辑器</h3><p>用文本编辑器写Python程序，然后保存为后缀为.py的文件，就可以用Python直接运行这个程序了。</p>
<p>Python的交互模式和直接运行.py文件有什么区别呢？</p>
<p>直接输入python进入交互模式，相当于启动了Python解释器，但是等待你一行一行地输入源代码，每输入一行就执行一行。</p>
<p>直接运行.py文件相当于启动了Python解释器，然后一次性把.py文件的源代码给执行了，你是没有机会以交互的方式输入源代码的。</p>
<p>用Python开发程序，完全可以一边在文本编辑器里写代码，一边开一个交互式命令窗口，在写代码的过程中，把部分代码粘到命令行去验证，事半功倍！前提是得有个27’的超大显示器！</p>
<h3 id="2-输入输出"><a href="#2-输入输出" class="headerlink" title="2.输入输出"></a>2.输入输出</h3><p>任何计算机程序都是为了执行一个特定的任务，有了输入，用户才能告诉计算机程序所需的信息，有了输出，程序运行后才能告诉用户任务的结果。</p>
<p>输入是Input，输出是Output，因此，我们把输入输出统称为Input/Output，或者简写为IO。</p>
<p>input()和print()是在命令行下面最基本的输入和输出，但是，用户也可以通过其他更高级的图形界面完成输入和输出，比如，在网页上的一个文本框输入自己的名字，点击“确定”后在网页上看到输出信息。</p>
<h3 id="3-数据类型与变量"><a href="#3-数据类型与变量" class="headerlink" title="3. 数据类型与变量"></a>3. 数据类型与变量</h3><p>Python支持多种数据类型，在计算机内部，可以把任何数据都看成一个“对象”，而变量就是在程序中用来指向这些数据对象的，对变量赋值就是把数据和变量给关联起来。</p>
<p>对变量赋值x = y是把变量x指向真正的对象，该对象是变量y所指向的。随后对变量y的赋值不影响变量x的指向。</p>
<p>注意：Python的整数没有大小限制，而某些语言的整数根据其存储长度是有大小限制的，例如Java对32位整数的范围限制在-2147483648-2147483647。</p>
<p>Python的浮点数也没有大小限制，但是超出一定范围就直接表示为inf（无限大）。</p>
<h3 id="4-字符串预编码"><a href="#4-字符串预编码" class="headerlink" title="4.字符串预编码"></a>4.字符串预编码</h3><p>Python 3的字符串使用Unicode，直接支持多语言。</p>
<p>当str和bytes互相转换时，需要指定编码。最常用的编码是UTF-8。Python当然也支持其他编码方式，比如把Unicode编码成GB2312：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; &apos;中文&apos;.encode(&apos;gb2312&apos;)</span><br><span class="line">b&apos;\xd6\xd0\xce\xc4&apos;</span><br></pre></td></tr></table></figure></p>
<p>但这种方式纯属自找麻烦，如果没有特殊业务要求，请牢记仅使用UTF-8编码。</p>
<p>格式化字符串的时候，可以用Python的交互式环境测试，方便快捷。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">s = &apos;Python-中文&apos;</span><br><span class="line">print(s)</span><br><span class="line">b = s.encode(&apos;utf-8&apos;)</span><br><span class="line">print(b)</span><br><span class="line">print(b.decode(&apos;utf-8&apos;))</span><br></pre></td></tr></table></figure>
<h3 id="5-使用list和tuple"><a href="#5-使用list和tuple" class="headerlink" title="5.使用list和tuple"></a>5.使用list和tuple</h3><p>list和tuple是Python内置的有序集合，一个可变，一个不可变。根据需要来选择使用它们。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">classmates = [&apos;Michael&apos;, &apos;Bob&apos;, &apos;Tracy&apos;]</span><br><span class="line">print(&apos;classmates =&apos;, classmates)</span><br><span class="line">print(&apos;len(classmates) =&apos;, len(classmates))</span><br><span class="line">print(&apos;classmates[0] =&apos;, classmates[0])</span><br><span class="line">print(&apos;classmates[1] =&apos;, classmates[1])</span><br><span class="line">print(&apos;classmates[2] =&apos;, classmates[2])</span><br><span class="line">print(&apos;classmates[-1] =&apos;, classmates[-1])</span><br><span class="line">classmates.pop()</span><br><span class="line">print(&apos;classmates =&apos;, classmates)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">classmates = (&apos;Michael&apos;, &apos;Bob&apos;, &apos;Tracy&apos;)</span><br><span class="line">print(&apos;classmates =&apos;, classmates)</span><br><span class="line">print(&apos;len(classmates) =&apos;, len(classmates))</span><br><span class="line">print(&apos;classmates[0] =&apos;, classmates[0])</span><br><span class="line">print(&apos;classmates[1] =&apos;, classmates[1])</span><br><span class="line">print(&apos;classmates[2] =&apos;, classmates[2])</span><br><span class="line">print(&apos;classmates[-1] =&apos;, classmates[-1])</span><br><span class="line"></span><br><span class="line"># cannot modify tuple:</span><br><span class="line">classmates[0] = &apos;Adam&apos;</span><br></pre></td></tr></table></figure>
<h3 id="6-条件判断"><a href="#6-条件判断" class="headerlink" title="6.条件判断"></a>6.条件判断</h3><p>条件判断可以让计算机自己做选择，Python的if…elif…else很灵活。</p>
<p>条件判断从上向下匹配，当满足条件时执行对应的块内语句，后续的elif和else都不再执行。</p>
<p>注意 : 条件判断的if条件下面逻辑实现代码要与if首字母位置间隔4个空格(TAB)</p>
<h3 id="7-循环"><a href="#7-循环" class="headerlink" title="7.循环"></a>7.循环</h3><p>循环是让计算机做重复任务的有效的方法。</p>
<p>break语句可以在循环过程中直接退出循环，而continue语句可以提前结束本轮循环，并直接开始下一轮循环。这两个语句通常都必须配合if语句使用。</p>
<p>要特别注意，不要滥用break和continue语句。break和continue会造成代码执行逻辑分叉过多，容易出错。大多数循环并不需要用到break和continue语句，上面的两个例子，都可以通过改写循环条件或者修改循环逻辑，去掉break和continue语句。</p>
<p>有些时候，如果代码写得有问题，会让程序陷入“死循环”，也就是永远循环下去。这时可以用Ctrl+C退出程序，或者强制结束Python进程。</p>
<p>请试写一个死循环程序。</p>
<h3 id="8-使用dict和set"><a href="#8-使用dict和set" class="headerlink" title="8.使用dict和set"></a>8.使用dict和set</h3><p>使用key-value存储结构的dict在Python中非常有用，选择不可变对象作为key很重要，最常用的key是字符串。</p>
<p>tuple虽然是不变对象，但试试把(1, 2, 3)和(1, [2, 3])放入dict或set中，并解释结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#dict</span><br><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">d = &#123;</span><br><span class="line">&apos;Michael&apos;: 95,</span><br><span class="line">&apos;Bob&apos;: 75,</span><br><span class="line">&apos;Tracy&apos;: 85</span><br><span class="line">&#125;</span><br><span class="line">print(&apos;d[\&apos;Michael\&apos;] =&apos;, d[&apos;Michael&apos;])</span><br><span class="line">print(&apos;d[\&apos;Bob\&apos;] =&apos;, d[&apos;Bob&apos;])</span><br><span class="line">print(&apos;d[\&apos;Tracy\&apos;] =&apos;, d[&apos;Tracy&apos;])</span><br><span class="line">print(&apos;d.get(\&apos;Thomas\&apos;, -1) =&apos;, d.get(&apos;Thomas&apos;, -1))</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#set</span><br><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">s1 = set([1, 1, 2, 2, 3, 3])</span><br><span class="line">print(s1)</span><br><span class="line">s2 = set([2, 3, 4])</span><br><span class="line">print(s1 &amp; s2)</span><br><span class="line">print(s1 | s2)</span><br></pre></td></tr></table></figure>
<h3 id="9-函数"><a href="#9-函数" class="headerlink" title="9.函数"></a>9.函数</h3><p>调用Python的函数，需要根据函数定义，传入正确的参数。如果函数调用出错，一定要学会看错误信息，所以英文很重要！</p>
<p>定义函数时，需要确定函数名和参数个数；</p>
<p>如果有必要，可以先对参数的数据类型做检查；</p>
<p>函数体内部可以用return随时返回函数结果；</p>
<p>函数执行完毕也没有return语句时，自动return None。</p>
<p>函数可以同时返回多个值，但其实就是一个tuple。</p>
<p>参数:</p>
<p>Python的函数具有非常灵活的参数形态，既可以实现简单的调用，又可以传入非常复杂的参数。</p>
<p>默认参数一定要用不可变对象，如果是可变对象，程序运行时会有逻辑错误！</p>
<p>要注意定义可变参数和关键字参数的语法：</p>
<p>*args是可变参数，args接收的是一个tuple；</p>
<p>**kw是关键字参数，kw接收的是一个dict。</p>
<p>以及调用函数时如何传入可变参数和关键字参数的语法：</p>
<p>可变参数既可以直接传入：func(1, 2, 3)，又可以先组装list或tuple，再通过<em>args传入：func(</em>(1, 2, 3))；</p>
<p>关键字参数既可以直接传入：func(a=1, b=2)，又可以先组装dict，再通过<strong>kw传入：func(</strong>{‘a’: 1, ‘b’: 2})。</p>
<p>使用<em>args和*</em>kw是Python的习惯写法，当然也可以用其他参数名，但最好使用习惯用法。</p>
<p>命名的关键字参数是为了限制调用者可以传入的参数名，同时可以提供默认值。</p>
<p>定义命名的关键字参数在没有可变参数的情况下不要忘了写分隔符*，否则定义的将是位置参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># *var参数</span><br><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">def hello(greeting, *args):</span><br><span class="line">if (len(args)==0):</span><br><span class="line">print(&apos;%s!&apos; % greeting)</span><br><span class="line">else:</span><br><span class="line">print(&apos;%s, %s!&apos; % (greeting, &apos;, &apos;.join(args)))</span><br><span class="line"></span><br><span class="line">hello(&apos;Hi&apos;) # =&gt; greeting=&apos;Hi&apos;, args=()</span><br><span class="line">hello(&apos;Hi&apos;, &apos;Sarah&apos;) # =&gt; greeting=&apos;Hi&apos;, args=(&apos;Sarah&apos;)</span><br><span class="line">hello(&apos;Hello&apos;, &apos;Michael&apos;, &apos;Bob&apos;, &apos;Adam&apos;) # =&gt; greeting=&apos;Hello&apos;, args=(&apos;Michael&apos;, &apos;Bob&apos;, &apos;Adam&apos;)</span><br><span class="line"></span><br><span class="line">names = (&apos;Bart&apos;, &apos;Lisa&apos;)</span><br><span class="line">hello(&apos;Hello&apos;, *names) # =&gt; greeting=&apos;Hello&apos;, args=(&apos;Bart&apos;, &apos;Lisa&apos;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># **kw参数</span><br><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line">def print_scores(**kw):</span><br><span class="line">print(&apos;      Name  Score&apos;)</span><br><span class="line">print(&apos;------------------&apos;)</span><br><span class="line">for name, score in kw.items():</span><br><span class="line">print(&apos;%10s  %d&apos; % (name, score))</span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line">print_scores(Adam=99, Lisa=88, Bart=77)</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">&apos;Adam Lee&apos;: 99,</span><br><span class="line">&apos;Lisa S&apos;: 88,</span><br><span class="line">&apos;F.Bart&apos;: 77</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print_scores(**data)</span><br><span class="line"></span><br><span class="line">def print_info(name, *, gender, city=&apos;Beijing&apos;, age):</span><br><span class="line">print(&apos;Personal Info&apos;)</span><br><span class="line">print(&apos;---------------&apos;)</span><br><span class="line">print(&apos;   Name: %s&apos; % name)</span><br><span class="line">print(&apos; Gender: %s&apos; % gender)</span><br><span class="line">print(&apos;   City: %s&apos; % city)</span><br><span class="line">print(&apos;    Age: %s&apos; % age)</span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line">print_info(&apos;Bob&apos;, gender=&apos;male&apos;, age=20)</span><br><span class="line">print_info(&apos;Lisa&apos;, gender=&apos;female&apos;, city=&apos;Shanghai&apos;, age=18)</span><br></pre></td></tr></table></figure>
<p>递归函数</p>
<p>使用递归函数的优点是逻辑简单清晰，缺点是过深的调用会导致栈溢出。</p>
<p>针对尾递归优化的语言可以通过尾递归防止栈溢出。尾递归事实上和循环是等价的，没有循环语句的编程语言只能通过尾递归实现循环。</p>
<p>Python标准的解释器没有针对尾递归做优化，任何递归函数都存在栈溢出的问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line"># 利用递归函数计算阶乘</span><br><span class="line"># N! = 1 * 2 * 3 * ... * N</span><br><span class="line">def fact(n):</span><br><span class="line">if n == 1:</span><br><span class="line">return 1</span><br><span class="line">return n * fact(n-1)</span><br><span class="line"></span><br><span class="line">print(&apos;fact(1) =&apos;, fact(1))</span><br><span class="line">print(&apos;fact(5) =&apos;, fact(5))</span><br><span class="line">print(&apos;fact(10) =&apos;, fact(10))</span><br><span class="line"></span><br><span class="line"># 利用递归函数移动汉诺塔:</span><br><span class="line">def move(n, a, b, c):</span><br><span class="line">if n == 1:</span><br><span class="line">print(&apos;move&apos;, a, &apos;--&gt;&apos;, c)</span><br><span class="line">else:</span><br><span class="line">move(n-1, a, c, b)</span><br><span class="line">move(1, a, b, c)</span><br><span class="line">move(n-1, b, a, c)</span><br><span class="line"></span><br><span class="line">move(4, &apos;A&apos;, &apos;B&apos;, &apos;C&apos;)</span><br></pre></td></tr></table></figure>
<h1 id="未完待续…"><a href="#未完待续…" class="headerlink" title="未完待续…"></a>未完待续…</h1>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python开发/">python开发</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
    <article id="post-ipa包重签名-替换ipa内文件" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/01/17/ipa包重签名-替换ipa内文件/" class="article-date">
  	<time datetime="2018-01-17T03:20:06.000Z" itemprop="datePublished">2018-01-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/17/ipa包重签名-替换ipa内文件/">
        ipa包重签名/替换ipa内文件
        
      </a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="ipa包重签名-替换ipa内文件"><a href="#ipa包重签名-替换ipa内文件" class="headerlink" title="ipa包重签名/替换ipa内文件"></a>ipa包重签名/替换ipa内文件</h1><h2 id="基本步骤"><a href="#基本步骤" class="headerlink" title="基本步骤"></a>基本步骤</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1、unzip demo.ipa</span><br><span class="line">2、rm -rf Payload/demo.app/_CodeSignature</span><br><span class="line">3、rm -rf Payload/demo.app/Frameworks/ChuShouTVSDK.framework/_CodeSignature</span><br><span class="line">4、cp your.mobileprovision Payload/demo.app/embedded.mobileprovision</span><br><span class="line">5、codesign -f -s &quot;your identity&quot; --entitlements Entitlements.plist Payload/demo.app/Frameworks/ChuShouTVSDK.framework</span><br><span class="line">6、codesign -f -s &quot;your identity&quot; --entitlements Entitlements.plist Payload/demo.app</span><br><span class="line">7、zip -r demo.ipa Payload Symbols</span><br></pre></td></tr></table></figure>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>在重签名之前要做一些准备工作。<br>　　<br>1.首先要下载并安装Xcode，里面有个codesign_allocate程序，在安装时/usr/bin中会多一个codesign的程序，该程序用于ipa包的签名。<br>　　<br>2.企业证书的Certificate文件，私钥文件，Provisioning Profile文件等。注意企业证书一定要是iOS Distribution的类型，不能是iOS Development。
　　　</p>
<h2 id="重签名步骤"><a href="#重签名步骤" class="headerlink" title="重签名步骤"></a>重签名步骤</h2><p>　　</p>
<h3 id="1-解压ipa"><a href="#1-解压ipa" class="headerlink" title="1.解压ipa"></a>1.解压ipa</h3><p>解压ipa得到Payload/[App name].bundle，打开bundle。
　　</p>
<h3 id="2-删除旧的ipa签名信息"><a href="#2-删除旧的ipa签名信息" class="headerlink" title="2.删除旧的ipa签名信息"></a>2.删除旧的ipa签名信息</h3><p>　　<br>删除bundle中的_CodeSignature文件夹，也就是删除之前ipa的签名信息。
　　</p>
<h3 id="3-更换证书"><a href="#3-更换证书" class="headerlink" title="3.更换证书"></a>3.更换证书</h3><p>　　<br>将bundle中旧的Provisioning Profile删除，用我们自己的企业证书的Provisioning Profile替代。
　　</p>
<h3 id="注意，要将ipa包中我们的企业证书改名为embedded-mobileprovision。"><a href="#注意，要将ipa包中我们的企业证书改名为embedded-mobileprovision。" class="headerlink" title="注意，要将ipa包中我们的企业证书改名为embedded.mobileprovision。"></a>注意，要将ipa包中我们的企业证书改名为embedded.mobileprovision。</h3><p>　　</p>
<h3 id="4-修改bundle内容"><a href="#4-修改bundle内容" class="headerlink" title="4.修改bundle内容"></a>4.修改bundle内容</h3><p>　　<br>此时我们可以尽情地修改bundle中的内容，例如添加一个动态库，删除一张图片等。<br>　　<br>注意：如果要往bundle中添加动态库，必须要先将其压缩成zip文件，在程序启动时将其解压到Documents目录下再dlopen，否则程序在启动时加载动态库文件会卡死在那里。
　　</p>
<h3 id="5-重新签名"><a href="#5-重新签名" class="headerlink" title="5.重新签名"></a>5.重新签名</h3><p>　　<br>在完成bundle内容的修改后，需要通过/usr/bin/codesign程序重新签名，命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/codesign -f -s &quot;iPhone Distribution: YourCompanyName&quot; --resource-rules Payload/ MYAPP.app/ResourceRules.plist Payload/ MYAPP.app</span><br></pre></td></tr></table></figure>
<p>其中iPhone Distribution可以从钥匙串访问中获取，就是企业证书的名字，例如下面的”iPhone Distribution:XXXXXXXXXX”：</p>
<p><img src="/images/ipaSignAgain.png" alt="&quot;image&quot;">
　　</p>
<h3 id="具体的命令示例："><a href="#具体的命令示例：" class="headerlink" title="具体的命令示例："></a>具体的命令示例：</h3><p>　　<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">codesign -f -s &quot;iPhone Developer: XXXXXXXXXX&quot; --resource-rules Payload/NdCP_Game_Demo.app/ResourceRules.plist Payload/NdCP_Game_Demo.app</span><br></pre></td></tr></table></figure></p>
<p>这条命令的意思是：使用keychain中”iPhone Developer: XXXXXXXXXX”标识的证书，根据Payload/NdCP_Game_Demo.app/ResourceRules.plist文件中的规则进行签名，如果ipa包中已经存在签名，那么将被替换，该过程生成的_CodeSignature目录将存放在Payload/NdCP_Game_Demo.app目录下。</p>
<p>在命令执行后，在bundle中会生成一个新的_CodeSignature目录，里面包含了新的签名信息。
　　</p>
<h3 id="6-重新打包成ipa"><a href="#6-重新打包成ipa" class="headerlink" title="6.重新打包成ipa"></a>6.重新打包成ipa</h3><p>　　<br>在完成上述工作后，可以生成新的ipa进行发布。示例命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">zip -r ResignTest.ipa Payload</span><br><span class="line"></span><br><span class="line"># 注意Payload后面不能有“/”</span><br></pre></td></tr></table></figure>
<h3 id="7-发布"><a href="#7-发布" class="headerlink" title="7.发布"></a>7.发布</h3><p>　经过打包发布测试，得出结论：对修改了ipa包内容和其中的签名后，重签名的ipa文件可以在非越狱设备和越狱设备上成功安装。注意，是通过带有SSL证书的网站和Apple系统安装的（企业内部分发程序），不是通过PP助手那样的第三方工具安装的。
　</p>
<h3 id="8-步骤总结"><a href="#8-步骤总结" class="headerlink" title="8.步骤总结"></a>8.步骤总结</h3><p>作为一个app应用程序开发者，在app应用程序在苹果商店上架前总需要将安装包安装到ios机器上进行测试，这个时候我们就需要打包in house版本的ipa了，打包in house实际上是一个将ipa应用程序重新签名的一个过程。一般来说打包in house需要以下东西:MAC机器，一般打包ipa都是在MAC机上打包的，一个后缀名为.mobileprovision概要配置文件,一个后缀名为P12的证书，还有一个后缀名为.cer的证书，还有就是你想重新签名的ipa.</p>
<p>如何给ipa重新签名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">步骤1 :</span><br><span class="line">unzip YourApp.ipa</span><br><span class="line">步骤2:</span><br><span class="line">rm -rf Payload/YourApp.app/_CodeSignature</span><br><span class="line">步骤3:</span><br><span class="line">cp InHouse.mobileprovision Payload/YourApp.app/embedded.mobileprovision</span><br><span class="line">步骤4:</span><br><span class="line">/usr/bin/codesign -f -s &quot;iPhone Distribution: YourCompanyName&quot; --resource-rules Payload/YourApp.app/ResourceRules.plist Payload/YourApp.app</span><br><span class="line">步骤5:</span><br><span class="line">zip -r YourApp_inhouse.ipa Payload</span><br><span class="line"></span><br><span class="line">* InHouse.mobileprovision 是你要用来签名的provision文件</span><br><span class="line">* iPhone Distribution: YourCompanyName 是指该签名对应的证书的名字。这个可以在keychain中找到</span><br></pre></td></tr></table></figure>
<h2 id="文档参考"><a href="#文档参考" class="headerlink" title="文档参考"></a>文档参考</h2><p><a href="http://www.olinone.com/?p=198" target="_blank" rel="noopener">http://www.olinone.com/?p=198</a></p>
<h1 id="iOS逆向工程-简单利用”dumpdecrypted”给ipa砸壳"><a href="#iOS逆向工程-简单利用”dumpdecrypted”给ipa砸壳" class="headerlink" title="iOS逆向工程(简单利用”dumpdecrypted”给ipa砸壳)"></a>iOS逆向工程(简单利用”dumpdecrypted”给ipa砸壳)</h1><p><a href="https://www.jianshu.com/p/a4373b5feca0" target="_blank" rel="noopener">https://www.jianshu.com/p/a4373b5feca0</a></p>
<p>　　　　　　　　</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios开发/">ios开发</a></li></ul>
	</div>

      

      
      <div class="clearfix"></div>
    </div>
      
    
  </div>
  
</article>







  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
      <div class="footer-left">
        &copy; 2023 JakieSun
      </div>
        <div class="footer-right">
          <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/smackgg/hexo-theme-smackdown" target="_blank">Smackdown</a>
        </div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="/js/main.js"></script>



<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js"></script>


  </div>
</body>
</html>